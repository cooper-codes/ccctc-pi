{"msg":"Resolving providers...","section":"providers                 →","timestamp":"2025-04-15T00:30:04.848Z","level":"info"}
{"msg":"Configuring provider...","section":"exec                      →","timestamp":"2025-04-15T00:30:05.149Z","level":"info"}
{"msg":"Configuring provider...","section":"container                 →","timestamp":"2025-04-15T00:30:05.151Z","level":"debug"}
{"msg":"Configuring provider...","section":"templated                 →","timestamp":"2025-04-15T00:30:05.152Z","level":"debug"}
{"msg":"Provider configured","section":"exec                      →","timestamp":"2025-04-15T00:30:05.161Z","level":"info"}
{"msg":"Provider configured","section":"container                 →","timestamp":"2025-04-15T00:30:05.162Z","level":"debug"}
{"msg":"Provider configured","section":"templated                 →","timestamp":"2025-04-15T00:30:05.163Z","level":"debug"}
{"msg":"Provider status cached","section":"exec                      →","timestamp":"2025-04-15T00:30:05.179Z","level":"info"}
{"msg":"resolve provider exec is ready.","section":"providers                 →","timestamp":"2025-04-15T00:30:05.180Z","level":"verbose"}
{"msg":"Provider status cached","section":"templated                 →","timestamp":"2025-04-15T00:30:05.181Z","level":"debug"}
{"msg":"resolve provider templated is ready.","section":"providers                 →","timestamp":"2025-04-15T00:30:05.181Z","level":"verbose"}
{"msg":"Provider status cached","section":"container                 →","timestamp":"2025-04-15T00:30:05.182Z","level":"debug"}
{"msg":"resolve provider container is ready.","section":"providers                 →","timestamp":"2025-04-15T00:30:05.182Z","level":"verbose"}
{"msg":"Configuring provider...","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:05.183Z","level":"info"}
{"msg":"Using current context: docker-desktop","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:05.323Z","level":"info"}
{"msg":"Provider configured","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:05.324Z","level":"info"}
{"msg":"Preparing environment","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:05.326Z","level":"info"}
{"msg":"An attempt to get kind version failed with Error: Failed to run kind: Error: Command failed with ENOENT: kind version\nspawn kind ENOENT","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:05.379Z","level":"debug"}
{"msg":"Kubernetes: Getting API resource info for group apiextensions.k8s.io/v1","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:05.517Z","level":"debug"}
{"msg":"An attempt to get k3s addons crd failed with Error: Request failed with response code 404: Kubernetes API: https://kubernetes.docker.internal:6443/apis/apiextensions.k8s.io/v1/customresourcedefinitions/addons.k3s.cattle.io. Message from the API: customresourcedefinitions.apiextensions.k8s.io \"addons.k3s.cattle.io\" not found","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:05.543Z","level":"debug"}
{"msg":"Kubernetes: Getting API resource info for group apps/v1","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:05.992Z","level":"debug"}
{"msg":"Status of ingress controller default-backend: [object Object]","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:06.027Z","level":"debug"}
{"msg":"Provider ready","section":"local-kubernetes          →","timestamp":"2025-04-15T00:30:06.028Z","level":"info"}
{"msg":"resolve provider local-kubernetes is ready.","section":"providers                 →","timestamp":"2025-04-15T00:30:06.030Z","level":"verbose"}
{"msg":"Finished resolving providers (took 1.2 sec)","section":"providers                 →","timestamp":"2025-04-15T00:30:06.031Z","level":"info"}
{"msg":"Some provider statuses were cached. Run with --force-refresh to force a refresh of provider statuses.","section":"providers                 →","timestamp":"2025-04-15T00:30:06.031Z","level":"info"}
{"msg":"Resolving actions and modules...","section":"graph                     →","timestamp":"2025-04-15T00:30:06.032Z","level":"info"}
{"msg":"Building graph from 2 action configs and 0 group configs","section":"graph                     →","timestamp":"2025-04-15T00:30:06.036Z","level":"debug"}
{"msg":"Retained 2 configs","section":"graph                     →","timestamp":"2025-04-15T00:30:06.037Z","level":"debug"}
{"msg":"Got 2 action configs without action filter","section":"graph                     →","timestamp":"2025-04-15T00:30:06.052Z","level":"debug"}
{"msg":"Finding minimal roots for 1 paths","section":"graph                     →","timestamp":"2025-04-15T00:30:06.053Z","level":"debug"}
{"msg":"Scanning Deploy action api root at /home/graham/Code/CCCTC\n  → Includes: (none)\n  → Excludes: (none)","section":"git                       →","timestamp":"2025-04-15T00:30:06.058Z","level":"verbose"}
{"msg":"Found 44913 files in Deploy action api root /home/graham/Code/CCCTC (took 11.2 sec)","section":"git                       →","timestamp":"2025-04-15T00:30:17.260Z","level":"verbose"}
{"msg":"Found 44913 files in path /home/graham/Code/CCCTC, filtering by 1 include and 5 exclude globs","section":"graph                     →","timestamp":"2025-04-15T00:30:17.683Z","level":"debug"}
{"msg":"Include globs: **/*","section":"graph                     →","timestamp":"2025-04-15T00:30:17.683Z","level":"debug"}
{"msg":"Exclude globs: **/.garden/**/*, .garden/**/*, .git/**/*, .gitmodules, debug-info*/**","section":"graph                     →","timestamp":"2025-04-15T00:30:17.684Z","level":"debug"}
{"msg":"Found 44913 files in path /home/graham/Code/CCCTC after glob matching","section":"graph                     →","timestamp":"2025-04-15T00:30:19.124Z","level":"debug"}
{"msg":"Large number of files (44913) found in Deploy action api. You may need to configure file exclusions.\nSee https://docs.garden.io/bonsai-0.13/using-garden/configuration-overview#including-excluding-files-and-directories for details.\n→ Run garden util hide-warning ccctc-app-filecount-api to disable this message.","section":"graph                     →","timestamp":"2025-04-15T00:30:19.125Z","level":"warn"}
{"msg":"Finished resolving graph (took 13.3 sec)","section":"graph                     →","timestamp":"2025-04-15T00:30:19.301Z","level":"info"}
{"msg":"Finished initializing Garden (took 15 sec)","section":"garden                    →","timestamp":"2025-04-15T00:30:19.302Z","level":"info"}
{"msg":"resolve Build type=container name=api is ready.","section":"build.api                 →","timestamp":"2025-04-15T00:30:19.323Z","level":"debug"}
{"msg":"resolve Deploy type=container name=api is ready.","section":"deploy.api                →","timestamp":"2025-04-15T00:30:19.330Z","level":"debug"}
{"msg":"Getting status for Deploy api (type container) at version v-93abc8b4b3...","section":"deploy.api                →","timestamp":"2025-04-15T00:30:19.331Z","level":"info"}
{"msg":"Kubernetes: Getting API resource info for group networking.k8s.io/v1","section":"deploy.api                →","timestamp":"2025-04-15T00:30:19.352Z","level":"debug"}
{"msg":"Kubernetes: Getting API resource info for group v1","section":"deploy.api                →","timestamp":"2025-04-15T00:30:19.364Z","level":"debug"}
{"msg":"Resource(s) Ingress/api-0 missing from cluster","section":"deploy.api                →","timestamp":"2025-04-15T00:30:19.393Z","level":"verbose"}
{"msg":"Status is outdated, api will be deployed","section":"deploy.api                →","timestamp":"2025-04-15T00:30:19.394Z","level":"info"}
{"msg":"Getting status for Build api (type container) at version v-1a33f26f7e...","section":"build.api                 →","timestamp":"2025-04-15T00:30:19.396Z","level":"info"}
{"msg":"Spawning '/home/graham/.garden/tools/docker/2a4740635b268a11/docker/docker images api:v-b68ef2cd4f -q' in /home/graham/Code/CCCTC","section":"build.api                 →","timestamp":"2025-04-15T00:30:19.399Z","level":"debug"}
{"msg":"Status is not ready, api will be built","section":"build.api                 →","timestamp":"2025-04-15T00:30:19.431Z","level":"info"}
{"msg":"Building api (type container) at version v-1a33f26f7e...","section":"build.api                 →","timestamp":"2025-04-15T00:30:19.433Z","level":"info"}
{"msg":"Syncing sources (44912 files)...","section":"build.api                 →","timestamp":"2025-04-15T00:30:19.435Z","level":"verbose"}
{"msg":"Syncing 44912 files from . to .garden/build/api (and removing any extraneous files)","section":"build.api                 →","timestamp":"2025-04-15T00:30:19.610Z","level":"debug"}
{"msg":"Done syncing sources (took 20.1 sec)","section":"build.api                 →","timestamp":"2025-04-15T00:30:39.477Z","level":"verbose"}
{"msg":"Spawning '/home/graham/.garden/tools/standalone-progressui/b72d1f26ff8c3a80/standalone-progressui-linux-amd64 ' in /home/graham/.garden/tools/standalone-progressui/b72d1f26ff8c3a80","section":"build.api                 →","timestamp":"2025-04-15T00:30:39.563Z","level":"debug"}
{"msg":"Building api:v-b68ef2cd4f...","section":"build.api                 →","timestamp":"2025-04-15T00:30:39.573Z","level":"info"}
{"msg":"Spawning '/home/graham/.garden/tools/docker/2a4740635b268a11/docker/docker buildx build --build-arg GARDEN_MODULE_VERSION=v-b68ef2cd4f --build-arg GARDEN_ACTION_VERSION=v-b68ef2cd4f --build-arg target=api --progress rawjson --metadata-file /tmp/garden-build-fb02b8jJeuL/metadata-file.json --tag api:v-b68ef2cd4f --file /home/graham/Code/CCCTC/.garden/build/api/Dockerfile /home/graham/Code/CCCTC/.garden/build/api' in /home/graham/Code/CCCTC/.garden/build/api","section":"build.api                 →","timestamp":"2025-04-15T00:30:39.574Z","level":"debug"}
{"msg":"#1 [internal] load build definition from Dockerfile","section":"build.api                 →","timestamp":"2025-04-15T00:30:40.312Z","level":"verbose"}
{"msg":"#1 transferring dockerfile: 620B 0.0s done","section":"build.api                 →","timestamp":"2025-04-15T00:30:40.313Z","level":"verbose"}
{"msg":"#1 DONE 0.0s","section":"build.api                 →","timestamp":"2025-04-15T00:30:40.313Z","level":"verbose"}
{"msg":"#2 [internal] load metadata for docker.io/library/node:22-slim","section":"build.api                 →","timestamp":"2025-04-15T00:30:40.313Z","level":"verbose"}
{"msg":"#2 DONE -2.2s","section":"build.api                 →","timestamp":"2025-04-15T00:30:37.997Z","level":"verbose"}
{"msg":"#3 [internal] load .dockerignore","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.170Z","level":"verbose"}
{"msg":"#3 transferring context: 104B done","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.170Z","level":"verbose"}
{"msg":"#3 DONE 0.1s","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.170Z","level":"verbose"}
{"msg":"#4 [internal] load build context","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.171Z","level":"verbose"}
{"msg":"#4 DONE 0.0s","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.171Z","level":"verbose"}
{"msg":"#5 [base 1/2] FROM docker.io/library/node:22-slim@sha256:1c18d9ab3af4585870b92e4dbc5cac5a0dc77dd13df1a5905cea89fc720eb05b","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.172Z","level":"verbose"}
{"msg":"#5 resolve docker.io/library/node:22-slim@sha256:1c18d9ab3af4585870b92e4dbc5cac5a0dc77dd13df1a5905cea89fc720eb05b 0.1s done","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.172Z","level":"verbose"}
{"msg":"#5 DONE 0.1s","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.172Z","level":"verbose"}
{"msg":"#4 [internal] load build context","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.284Z","level":"verbose"}
{"msg":"#4 transferring context: 286.88kB 0.4s done","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.535Z","level":"verbose"}
{"msg":"#4 DONE 0.4s","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.749Z","level":"verbose"}
{"msg":"#6 [base 2/2] RUN corepack enable","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.750Z","level":"verbose"}
{"msg":"#6 CACHED","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.751Z","level":"verbose"}
{"msg":"#7 [build 1/6] COPY . /usr/src/app","section":"build.api                 →","timestamp":"2025-04-15T00:30:38.752Z","level":"verbose"}
{"msg":"#7 DONE 2.8s","section":"build.api                 →","timestamp":"2025-04-15T00:30:41.444Z","level":"verbose"}
{"msg":"#8 [build 2/6] WORKDIR /usr/src/app","section":"build.api                 →","timestamp":"2025-04-15T00:30:41.610Z","level":"verbose"}
{"msg":"#8 DONE 0.2s","section":"build.api                 →","timestamp":"2025-04-15T00:30:41.678Z","level":"verbose"}
{"msg":"#9 [build 3/6] RUN --mount=type=cache,id=pnpm,target=/pnpm/store pnpm install --frozen-lockfile","section":"build.api                 →","timestamp":"2025-04-15T00:30:41.836Z","level":"verbose"}
{"msg":"#9 0.933 ! Corepack is about to download https://registry.npmjs.org/pnpm/-/pnpm-10.8.1.tgz","section":"build.api                 →","timestamp":"2025-04-15T00:30:42.618Z","level":"verbose"}
{"msg":"#9 2.428 Scope: all 4 workspace projects","section":"build.api                 →","timestamp":"2025-04-15T00:30:44.113Z","level":"verbose"}
{"msg":"#9 2.490 Lockfile is up to date, resolution step is skipped","section":"build.api                 →","timestamp":"2025-04-15T00:30:44.246Z","level":"verbose"}
{"msg":"#9 2.561 Progress: resolved 1, reused 0, downloaded 0, added 0","section":"build.api                 →","timestamp":"2025-04-15T00:30:44.246Z","level":"verbose"}
{"msg":"#9 2.734 Packages: +612","section":"build.api                 →","timestamp":"2025-04-15T00:30:44.420Z","level":"verbose"}
{"msg":"#9 2.734 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++","section":"build.api                 →","timestamp":"2025-04-15T00:30:44.420Z","level":"verbose"}
{"msg":"#9 3.562 Progress: resolved 612, reused 611, downloaded 0, added 88","section":"build.api                 →","timestamp":"2025-04-15T00:30:45.247Z","level":"verbose"}
{"msg":"#9 4.548 Progress: resolved 612, reused 611, downloaded 0, added 612, done","section":"build.api                 →","timestamp":"2025-04-15T00:30:46.233Z","level":"verbose"}
{"msg":"#9 5.027 Done in 3s using pnpm v10.8.1","section":"build.api                 →","timestamp":"2025-04-15T00:30:46.713Z","level":"verbose"}
{"msg":"#9 DONE 5.1s","section":"build.api                 →","timestamp":"2025-04-15T00:30:46.827Z","level":"verbose"}
{"msg":"#10 [build 4/6] RUN pnpm run -r build","section":"build.api                 →","timestamp":"2025-04-15T00:30:46.981Z","level":"verbose"}
{"msg":"#10 0.813 No projects matched the filters \"/usr/src/app\" in \"/usr/src/app\"","section":"build.api                 →","timestamp":"2025-04-15T00:30:47.644Z","level":"verbose"}
{"msg":"#10 0.816 Scope: all 4 workspace projects","section":"build.api                 →","timestamp":"2025-04-15T00:30:47.801Z","level":"verbose"}
{"msg":"#10 0.820 packages/logger build$ tsc","section":"build.api                 →","timestamp":"2025-04-15T00:30:47.802Z","level":"verbose"}
{"msg":"#10 1.755 packages/logger build: Done","section":"build.api                 →","timestamp":"2025-04-15T00:30:48.587Z","level":"verbose"}
{"msg":"#10 DONE 1.8s","section":"build.api                 →","timestamp":"2025-04-15T00:30:48.802Z","level":"verbose"}
{"msg":"#11 [build 5/6] RUN pnpm deploy --filter=api --prod /prod/api","section":"build.api                 →","timestamp":"2025-04-15T00:30:48.803Z","level":"verbose"}
{"msg":"#11 0.760 No projects matched the filters in \"/usr/src/app\"","section":"build.api                 →","timestamp":"2025-04-15T00:30:49.412Z","level":"verbose"}
{"msg":"#11 DONE 0.8s","section":"build.api                 →","timestamp":"2025-04-15T00:30:49.605Z","level":"verbose"}
{"msg":"#12 [build 6/6] RUN pnpm deploy --filter=web --prod /prod/web","section":"build.api                 →","timestamp":"2025-04-15T00:30:49.606Z","level":"verbose"}
{"msg":"#12 0.785 No projects matched the filters in \"/usr/src/app\"","section":"build.api                 →","timestamp":"2025-04-15T00:30:50.240Z","level":"verbose"}
{"msg":"Failed (took 30.9 sec)","section":"build.api                 →","timestamp":"2025-04-15T00:30:50.365Z","level":"error"}
{"msg":"Aborting because upstream dependency failed.","metadata":{"task":{"type":"deploy","key":"deploy.api","status":"error","uid":"cf57d3f0-1990-11f0-83d8-4b2d70fa635b","inputVersion":null}},"section":"deploy.api                →","timestamp":"2025-04-15T00:30:50.369Z","level":"info"}
{"msg":"Failed processing Build type=container name=api (took 30.98 sec). This is what happened:\n\n──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\nDockerfile:15\n--------------------\n  13 |     \n  14 |     FROM base AS api\n  15 | >>> COPY --from=build /prod/api /prod/api\n  16 |     WORKDIR /prod/api\n  17 |     EXPOSE 3001\n--------------------\nERROR: failed to solve: failed to compute cache key: failed to calculate checksum of ref f7izg55w602add8biworjb1h9::zz8hvq65urftcit0kamzwew14: \"/prod/api\": not found\n──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────","section":"build.api                 →","timestamp":"2025-04-15T00:30:50.372Z","level":"error","errorDetail":"Error: Dockerfile:15\n--------------------\n  13 |     \n  14 |     FROM base AS api\n  15 | >>> COPY --from=build /prod/api /prod/api\n  16 |     WORKDIR /prod/api\n  17 |     EXPOSE 3001\n--------------------\nERROR: failed to solve: failed to compute cache key: failed to calculate checksum of ref f7izg55w602add8biworjb1h9::zz8hvq65urftcit0kamzwew14: \"/prod/api\": not found\n    at buildxBuildContainer (file:///home/graham/.local/share/garden/1744673442-80UsTNx.r/rollup/container-CIK3SmVD.mjs:704:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AsyncFunction.buildContainer (file:///home/graham/.local/share/garden/1744673442-80UsTNx.r/rollup/container-CIK3SmVD.mjs:591:15)\n    at async localBuild (file:///home/graham/.local/share/garden/1744673442-80UsTNx.r/rollup/kubernetes-xrAecQ_d.mjs:3151:25)\n    at async Object.assign.handlerType.handlerType (file:///home/graham/.local/share/garden/1744673442-80UsTNx.r/rollup/garden.mjs:787844:28)\n    at async Router.callHandler (file:///home/graham/.local/share/garden/1744673442-80UsTNx.r/rollup/garden.mjs:787815:24)\n    at async build (file:///home/graham/.local/share/garden/1744673442-80UsTNx.r/rollup/garden.mjs:788430:24)\n    at async file:///home/graham/.local/share/garden/1744673442-80UsTNx.r/rollup/garden.mjs:447218:20\n    at async BuildTask.process (file:///home/graham/.local/share/garden/1744673442-80UsTNx.r/rollup/garden.mjs:451552:32)\n    at async descriptor.value (file:///home/graham/.local/share/garden/1744673442-80UsTNx.r/rollup/garden.mjs:448580:29)\nError type: build"}
{"msg":"Done flushing all events and log entries.","section":"","timestamp":"2025-04-15T00:30:50.378Z","level":"debug"}
{"msg":"Watcher: Initializing","section":"","timestamp":"2025-04-15T00:30:50.431Z","level":"debug"}
{"msg":"Watcher: Starting FSWatcher","section":"","timestamp":"2025-04-15T00:30:50.431Z","level":"debug"}
{"msg":"See .garden/error.log for detailed error message","section":"","timestamp":"2025-04-15T00:30:50.682Z","level":"info"}
